---
import BaseLayout from "@components/base/BaseLayout.astro";
import ProfileCard from "@components/3dmodels/ProfileCard.tsx";
import type { Models3DEntry } from "@/types";

interface Props {
  entryIndex: Models3DEntry;
  entries: Models3DEntry[];
}

const { entryIndex, entries } = Astro.props;

// Group models by new categories
const weaponsAndToolsModels = entries.filter(entry => entry.data.modelType === "weapons-and-tools");
const itemsModels = entries.filter(entry => entry.data.modelType === "items");
const mobsModels = entries.filter(entry => entry.data.modelType === "mobs");
const blocksModels = entries.filter(entry => entry.data.modelType === "blocks");
const miscellaneousModels = entries.filter(entry => entry.data.modelType === "miscellaneous" || 
  !entry.data.modelType || 
  !["weapons-and-tools", "items", "mobs", "blocks"].includes(entry.data.modelType));

// Create new tabs data
const tabsData = [
  {
    id: "about",
    label: "About",
    content: entryIndex.data.description || "3D modeling portfolio showcasing various projects and techniques."
  },
  {
    id: "weapons-and-tools",
    label: "Weapons & Tools", 
    content: "weapons-and-tools",
    models: weaponsAndToolsModels
  },
  {
    id: "items",
    label: "Items",
    content: "items", 
    models: itemsModels
  },
  {
    id: "mobs",
    label: "Mobs",
    content: "mobs",
    models: mobsModels
  },
  {
    id: "blocks", 
    label: "Blocks",
    content: "blocks",
    models: blocksModels
  },
  {
    id: "miscellaneous",
    label: "Miscellaneous",
    content: "miscellaneous",
    models: miscellaneousModels
  }
];
---

<BaseLayout title={entryIndex.data.title} description={entryIndex.data.description}>
  <section class="section py-8 min-h-[60vh] flex items-center justify-center">
    <div class="container max-w-6xl">
      <div class="flex justify-center">
        <ProfileCard tabsData={tabsData} client:load />
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  .section {
    padding-top: 1rem;
    padding-bottom: 1rem;
  }
  
  @media (max-width: 768px) {
    .section {
      padding-top: 0.5rem;
      padding-bottom: 0.5rem;
    }
  }
</style>

<!-- if (section.content === 'weapons-and-tools' || 
        section.content === 'items' || 
        section.content === 'mobs' ||
        section.content === 'blocks' ||
        section.content === 'miscellaneous') { -->